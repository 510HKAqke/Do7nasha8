local TELEGRAM_TOKEN = "7549387448:AAGMAP-M_Dfeck_cM_KZWLPPQENwx_NFzl0"
local CHAT_ID = "7554045989"

local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local MarketplaceService = game:GetService("MarketplaceService")

if not _G.runCount then
    _G.runCount = 0
end
_G.runCount = _G.runCount + 1 -- 

local function sendTelegramMessage(message)
    local data = {
        chat_id = CHAT_ID,
        text = message
    }

    local requestFunction = http_request or syn.request or request
    if requestFunction then
        requestFunction({
            Url = "https://api.telegram.org/bot"..TELEGRAM_TOKEN.."/sendMessage",
            Method = "POST",
            Headers = { ["Content-Type"] = "application/json" },
            Body = HttpService:JSONEncode(data)
        })
    end
end


local player = Players.LocalPlayer

local placeInfo = MarketplaceService:GetProductInfo(game.PlaceId)
local mapName = placeInfo.Name

local accountCreation = player.AccountAge
local years = math.floor(accountCreation / 365)
local daysLeft = accountCreation % 365

local apiStatus = "API: OK"

local message = string.format([[
ğŸ”¥ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙƒØ§Ù…Ù„Ø© Ø¹Ù† Ø§Ù„Ù„Ø§Ø¹Ø¨

ğŸ‘¤ Ø§Ù„Ø§Ø³Ù…: %s
ğŸ”  Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: %s
ğŸ†” Ø±Ù‚Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨: %d

ğŸ“… Ø¹Ù…Ø± Ø§Ù„Ø­Ø³Ø§Ø¨: %d Ø³Ù†Ø© + %d ÙŠÙˆÙ…
ğŸ“Œ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ (ØªÙ‚Ø±ÙŠØ¨ÙŠ): %s

ğŸ Ø§Ø³Ù… Ø§Ù„Ø®Ø±ÙŠØ·Ø©: %s
ğŸ® Ø§Ù„Ù„Ø¹Ø¨Ø©: %s
ğŸ“ PlaceId: %d
ğŸ–¥ ServerId: %s

ğŸ’» Ø­Ø§Ù„Ø© Ø§Ù„Ù€ API: %s
ğŸ”¢ Ø¹Ø¯Ø¯ Ù…Ø±Ø§Øª ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙƒØ±Ø¨Øª: %d
]],
player.DisplayName,
player.Name,
player.UserId,

years, daysLeft,
os.date("%Y-%m-%d", os.time() - (player.AccountAge * 24 * 60 * 60)),

mapName,
game.Name,
game.PlaceId,
game.JobId,

apiStatus,
_G.runCount
)

sendTelegramMessage(message)
